# Tasks: 实现零售客户账户信息页面

## Phase 1: 页面基础结构 (2小时)

- [ ] 创建 `account-info.vue` 主页面文件
- [ ] 实现 8 个 Tab 页的基础结构（使用 `a-tabs` 组件）
- [ ] 配置 Tab 页标签（存款、贷款、理财、基金、信托、保险、贵金属、信用卡）
- [ ] 实现 Tab 切换状态管理（使用 `ref` 存储 `activeTab`）
- [ ] 添加视图模式切换按钮组（表格/卡片）
- [ ] 实现视图模式状态管理和 localStorage 持久化
- [ ] 添加页面基础样式（Tab 样式、布局样式）

## Phase 2: 存款账户功能 (30分钟)

- [ ] 配置存款账户表格 VxeTable（使用 `useVbenVxeGrid`）
- [ ] 定义存款账户表格列（账号、户名、账户类型、状态、余额等）
- [ ] 实现存款账户 API 调用（`getCustomerAccountDepositPage`）
- [ ] 添加字典映射（账户类型、账户状态、币种）
- [ ] 实现金额和日期格式化
- [ ] 实现存款账户卡片视图
- [ ] 测试存款账户数据加载和展示

## Phase 3: 贷款账户功能 (30分钟)

- [ ] 配置贷款账户表格 VxeTable
- [ ] 定义贷款账户表格列（贷款账号、借款人、产品名称、状态、余额、利率等）
- [ ] 实现贷款账户 API 调用（`getCustomerAccountLoanPage`）
- [ ] 添加字典映射（账户状态、贷款类型、还款方式等）
- [ ] 实现贷款账户卡片视图
- [ ] 测试贷款账户数据加载和展示

## Phase 4: 理财账户功能 (30分钟)

- [ ] 配置理财账户表格 VxeTable
- [ ] 定义理财账户表格列（理财账号、户名、产品名称、状态、市值、收益率等）
- [ ] 实现理财账户 API 调用（`getCustomerAccountWealthPage`）
- [ ] 添加字典映射（账户状态、理财类型、风险等级）
- [ ] 实现理财账户卡片视图
- [ ] 测试理财账户数据加载和展示

## Phase 5: 基金账户功能 (30分钟)

- [ ] 配置基金账户表格 VxeTable
- [ ] 定义基金账户表格列（基金账号、户名、产品名称、状态、份额、市值等）
- [ ] 实现基金账户 API 调用（`getCustomerAccountFundPage`）
- [ ] 添加字典映射（账户状态、基金类型）
- [ ] 实现基金账户卡片视图
- [ ] 测试基金账户数据加载和展示

## Phase 6: 信托账户功能 (30分钟)

- [ ] 配置信托账户表格 VxeTable
- [ ] 定义信托账户表格列（信托账号、委托人、产品名称、状态、金额、收益率等）
- [ ] 实现信托账户 API 调用（`getCustomerAccountTrustPage`）
- [ ] 添加字典映射（账户状态、信托类型）
- [ ] 实现信托账户卡片视图
- [ ] 测试信托账户数据加载和展示

## Phase 7: 保险账户功能 (30分钟)

- [ ] 配置保险账户表格 VxeTable
- [ ] 定义保险账户表格列（保单号、投保人、产品名称、状态、保额、保费等）
- [ ] 实现保险账户 API 调用（`getCustomerAccountInsurancePage`）
- [ ] 添加字典映射（账户状态、保险类型、缴费频率）
- [ ] 实现保险账户卡片视图
- [ ] 测试保险账户数据加载和展示

## Phase 8: 贵金属账户功能 (30分钟)

- [ ] 配置贵金属账户表格 VxeTable
- [ ] 定义贵金属账户表格列（账号、户名、品种、状态、数量、市值等）
- [ ] 实现贵金属账户 API 调用（`getCustomerAccountMetalPage`）
- [ ] 添加字典映射（账户状态、贵金属类型、单位）
- [ ] 实现贵金属账户卡片视图
- [ ] 测试贵金属账户数据加载和展示

## Phase 9: 信用卡账户功能 (30分钟)

- [ ] 配置信用卡账户表格 VxeTable
- [ ] 定义信用卡账户表格列（卡号、持卡人、卡片类型、状态、额度等）
- [ ] 实现信用卡账户 API 调用（`getCustomerAccountCreditcardPage`）
- [ ] 添加字典映射（卡片状态、卡片类型）
- [ ] 实现卡号脱敏显示逻辑
- [ ] 实现信用卡账户卡片视图
- [ ] 测试信用卡账户数据加载和展示

## Phase 10: 优化和增强功能 (1.5小时)

- [ ] 实现 Tab 懒加载逻辑（仅加载当前激活的 Tab）
- [ ] 实现卡片视图的 Grid 响应式布局
- [ ] 优化卡片样式（添加阴影、hover 效果、状态标签等）
- [ ] 实现空状态展示（表格和卡片视图）
- [ ] 添加加载状态展示
- [ ] 实现错误处理和错误提示
- [ ] 优化金额格式化（千分位、小数位、负数颜色）
- [ ] 优化日期格式化（统一格式、空值处理）
- [ ] 实现视图切换动画效果
- [ ] 添加刷新按钮功能测试

## Phase 11: 导航集成 (1小时)

- [ ] 修改 `detail.vue`，导入 `account-info.vue` 组件
- [ ] 在 `menuItems` 数组中添加"账户信息"菜单项
- [ ] 配置菜单项的 key 为 'account'，label 为 '账户信息'
- [ ] 将菜单项插入到"客户业务概览"位置
- [ ] 测试菜单点击和页面切换
- [ ] 测试菜单高亮状态
- [ ] 验证 customerId 正确传递到账户信息页面

## Phase 12: 全量测试和优化 (1小时)

- [ ] 测试所有 8 个账户类型的表格视图
- [ ] 测试所有 8 个账户类型的卡片视图
- [ ] 测试视图模式切换（表格 ↔ 卡片）
- [ ] 测试视图模式偏好持久化（刷新页面）
- [ ] 测试 Tab 切换和数据加载
- [ ] 测试分页功能
- [ ] 测试刷新功能
- [ ] 测试空状态展示
- [ ] 测试错误处理
- [ ] 测试响应式布局（不同屏幕尺寸）
- [ ] 检查字典映射是否正确
- [ ] 检查数据格式化是否正确
- [ ] 性能测试（大数据量）
- [ ] 浏览器兼容性测试
- [ ] 代码审查和优化
- [ ] 修复发现的问题

## Phase 13: 文档和交付 (30分钟)

- [ ] 更新 OpenSpec tasks.md 状态
- [ ] 截图记录各账户类型的展示效果
- [ ] 编写功能说明文档
- [ ] 提交代码到 Git
- [ ] 推送到远程仓库
- [ ] 通知测试人员进行验收测试

## 依赖关系

- Phase 2-9 可以并行开发（独立的账户类型）
- Phase 10 依赖 Phase 2-9 完成
- Phase 11 依赖 Phase 1 和 Phase 10 完成
- Phase 12 依赖所有前序阶段完成

## 验收标准

所有任务完成后，需满足以下验收标准：

1. ✅ 零售客户详情页左侧菜单显示"账户信息"入口
2. ✅ 点击进入账户信息页面，显示 8 个 Tab 页
3. ✅ 每个 Tab 页默认显示表格视图
4. ✅ 每个 Tab 页支持切换到卡片视图
5. ✅ 表格视图支持分页、排序、刷新
6. ✅ 卡片视图布局美观，响应式适配
7. ✅ 所有字典值正确映射显示
8. ✅ 金额和日期格式化正确
9. ✅ 数据为空时显示友好的空状态
10. ✅ 视图模式偏好保存到 localStorage
11. ✅ API 请求失败时显示错误提示
12. ✅ Tab 切换流畅，数据加载正常
13. ✅ 卡号等敏感信息正确脱敏
14. ✅ 代码通过 ESLint 和 TypeScript 检查
15. ✅ 无控制台错误和警告

## 预计工时

- Phase 1: 2.0 小时
- Phase 2-9: 4.0 小时（8 × 0.5）
- Phase 10: 1.5 小时
- Phase 11: 1.0 小时
- Phase 12: 1.0 小时
- Phase 13: 0.5 小时

**总计: 10.0 小时**
